#!/bin/sh
ICON_PLAYING=''
ICON_PAUSED=''
ICON_STOPPED=''
ICON_MUSIC=''

MPC_OUTPUT="$(mpc --format '%title%;%album%')"
if [ '$(echo $MPC_OUTPUT | wc -l | cut -c1)' != '1' ]; then
    MPC_ARTIST_TITLE="$(echo "$MPC_OUTPUT" | head -1 | cut -d';' -f1)"
    MPC_ALBUM="$(echo "$MPC_OUTPUT" | head -1 | cut -d';' -f2)"
    MPC_STATUS="$(echo "$MPC_OUTPUT" | grep -oE '\[[[:alnum:]]*?\]')"

    if [[ "$MPC_STATUS" == "[playing]" ]]; then
        CURRENT_STATUS_ICON="%{F\$NBLU} $ICON_MUSIC$ICON_PLAYING%{F-}"
    elif [[ "$MPC_STATUS" == "[paused]" ]]; then
        CURRENT_STATUS_ICON="%{F\$NYEL} $ICON_MUSIC$ICON_PAUSED%{F-}"
    else 
        CURRENT_STATUS_ICON="%{F\$NRED} $ICON_MUSIC%{F-}"
        echo "$CURRENT_STATUS_ICON"
        exit 0
    fi

    if [[ -z "$MPC_ALBUM" ]]; then
        CURRENT_STATUS="$MPC_ARTIST_TITLE"
    else
        #CURRENT_STATUS="$MPC_ARTIST_TITLE ($MPC_ALBUM)"
        CURRENT_STATUS="$MPC_ARTIST_TITLE"
    fi

    echo -e "$CURRENT_STATUS_ICON$CURRENT_STATUS"
fi
